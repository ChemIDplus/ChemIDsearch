<div fxLayout="row" fxLayout.xs="column">
	<div fxFlex="50">
		<div class="name"><a [routerLink]="routerLink" (click)="onRequestSubstance()">{{ name }}</a></div>
		<div *ngIf="rn">RN: {{ rn }}</div>
		<div *ngIf="mesh">MeSH: {{ mesh }}</div>
		<div *ngIf="citations">Citations: {{ citations | number }}</div>
		<div *ngIf="formula && formula !== 'Unspecified'">Formula: {{ formula }}</div>
		<div *ngIf="weight">Weight: {{ weight | number}}</div>
		<div *ngIf="inchikey">InChIKey: {{ inchikey }}</div>
		<div *ngIf="substance.lastMod" class="last-mod">Updated: {{ substance.lastMod | date}}</div>
	</div>
	<div *ngIf="structuresView" fxFlex="50" fxLayout="row" fxLayoutAlign="space-around" style="white-space:nowrap">
		<div *ngIf="!weight" fxFlex="none" fxFlex.xs="100" fxFlexAlign="center">No image available</div>
		<ng-container *ngIf="!!weight">
			<div fxFlex="none" fxLayout="column">
				<app-structure-image *ngIf="structure" [bytes]="image"></app-structure-image>
				<div *ngIf="!structure && !!weight" fxFlexAlign="center">Loading image...</div>
				<div *ngIf="similarity" fxFlexAlign="center">{{ similarity }}% similar</div>
			</div>
			<div fxFlex="none" fxLayout="column" fxLayoutAlign="space-between" class="link-rows">
				<ng-container *ngIf="structure">
					<a fxFlex [routerLink]="['/results', 'structure', 'substructure', rn_id]" title="Substructure search">Sub</a>
					<a fxFlex [routerLink]="['/results', 'structure', 'similarity'+linkSimPercent, rn_id]" [title]="'Find structures ' + (linkSimPercent < 100 ? 'at least ' : '') + linkSimPercent + '% similar to this one'">Sim {{ linkSimPercent }}%</a>
					<a fxFlex [routerLink]="['/results', 'structure', 'flex', rn_id]" title="Find parent, salts, and hydrates">Flex</a>
					<a fxFlex [routerLink]="['/results', 'structure', 'flexplus', rn_id]" title="Find parent, all variations">Flexplus</a>
					<a fxFlex target="_blank" [href]="'https://chem.nlm.nih.gov/chemidplus/structure/viewer/' + rn_id" title="Open a window with an enlarged image">Zoom</a>
					<a *ngIf="has3D" fxFlex target="_blank" [href]="'https://chem.nlm.nih.gov/chemidplus/structure3D/viewer/' + rn_id" title="Open a window with a dynamic 3D image">3D</a>
				</ng-container>
			</div>
		</ng-container>
	</div>
</div>
